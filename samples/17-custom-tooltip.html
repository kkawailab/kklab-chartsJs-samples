<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’UTF-8ã«è¨­å®š -->
    <meta charset="UTF-8">
    <!-- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ç”¨ã®ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆè¨­å®š -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>17 - ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</title>
    <!-- Chart.js ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’CDNã‹ã‚‰èª­ã¿è¾¼ã¿ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        /* ===== CSSãƒªã‚»ãƒƒãƒˆ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ===== ãƒšãƒ¼ã‚¸å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« ===== */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        /* ===== ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ ===== */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        .chart-container {
            position: relative;
            height: 400px;
        }

        .description {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>17 - ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</h1>

        <!-- Chart.jsãŒã‚°ãƒ©ãƒ•ã‚’æç”»ã™ã‚‹canvasè¦ç´  -->
        <div class="chart-container">
            <canvas id="myChart"></canvas>
        </div>

        <div class="description">
            <strong>å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ:</strong>
            <ul>
                <li>tooltip.callbacksã§ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®å†…å®¹ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</li>
                <li>title, label, footerç­‰ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°</li>
                <li>ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆè‰²ã€ãƒ•ã‚©ãƒ³ãƒˆç­‰ï¼‰ã®å¤‰æ›´</li>
            </ul>
        </div>
    </div>

    <script>
        // ===== ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º =====
        // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã¯ãƒã‚¦ã‚¹ãƒ›ãƒãƒ¼æ™‚ã«è¡¨ç¤ºã•ã‚Œã‚‹æƒ…å ±ãƒœãƒƒã‚¯ã‚¹
        // callbacksã‚’ä½¿ã£ã¦è¡¨ç¤ºå†…å®¹ã‚’è‡ªç”±ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹

        // canvasè¦ç´ ã®2Dã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
        const ctx = document.getElementById('myChart').getContext('2d');

        // è¿½åŠ ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§ä½¿ç”¨ï¼‰
        // ãƒãƒ£ãƒ¼ãƒˆã®dataã¨ã¯åˆ¥ã«ã€è©³ç´°æƒ…å ±ã‚’æŒã¤é…åˆ—ã‚’ç”¨æ„
        const salesData = [
            { month: '1æœˆ', sales: 120, target: 100, growth: 20 },
            { month: '2æœˆ', sales: 150, target: 120, growth: 25 },
            { month: '3æœˆ', sales: 180, target: 150, growth: 20 },
            { month: '4æœˆ', sales: 200, target: 180, growth: 11 },
            { month: '5æœˆ', sales: 220, target: 200, growth: 10 },
            { month: '6æœˆ', sales: 250, target: 220, growth: 14 }
        ];

        // ãƒãƒ£ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿å®šç¾©
        const data = {
            // salesDataã‹ã‚‰ãƒ©ãƒ™ãƒ«ã‚’æŠ½å‡º
            labels: salesData.map(d => d.month),

            datasets: [{
                label: 'å£²ä¸Š',
                // salesDataã‹ã‚‰å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
                data: salesData.map(d => d.sales),
                backgroundColor: 'rgba(54, 162, 235, 0.7)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 2
            }]
        };

        // ãƒãƒ£ãƒ¼ãƒˆã®è¨­å®š
        const config = {
            type: 'bar',

            data: data,

            options: {
                responsive: true,
                maintainAspectRatio: false,

                plugins: {
                    title: {
                        display: true,
                        text: 'æœˆåˆ¥å£²ä¸Šï¼ˆã‚«ã‚¹ã‚¿ãƒ ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼‰'
                    },

                    // â˜… tooltip: ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
                    tooltip: {
                        // èƒŒæ™¯è‰²
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',

                        // ã‚¿ã‚¤ãƒˆãƒ«éƒ¨åˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«
                        titleColor: '#fff',
                        titleFont: {
                            size: 16,
                            weight: 'bold'
                        },

                        // æœ¬æ–‡éƒ¨åˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«
                        bodyColor: '#fff',
                        bodyFont: {
                            size: 14
                        },

                        // ãƒ•ãƒƒã‚¿ãƒ¼éƒ¨åˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ«
                        footerColor: '#aaa',
                        footerFont: {
                            size: 12,
                            style: 'italic'
                        },

                        // å†…å´ã®ä½™ç™½
                        padding: 15,

                        // è§’ä¸¸
                        cornerRadius: 10,

                        // è‰²ã®ãƒœãƒƒã‚¯ã‚¹ã‚’è¡¨ç¤º
                        displayColors: true,

                        // â˜… callbacks: ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®å†…å®¹ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
                        callbacks: {
                            // title: ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
                            title: function(tooltipItems) {
                                // tooltipItems[0].label ã§ç¾åœ¨ã®ãƒ©ãƒ™ãƒ«ï¼ˆæœˆï¼‰ã‚’å–å¾—
                                return 'ğŸ“Š ' + tooltipItems[0].label + 'ã®å®Ÿç¸¾';
                            },

                            // label: ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®æœ¬æ–‡ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
                            label: function(context) {
                                // context.dataIndex ã§ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—
                                const index = context.dataIndex;
                                const item = salesData[index];

                                // é…åˆ—ã‚’è¿”ã™ã¨è¤‡æ•°è¡Œã§è¡¨ç¤ºã•ã‚Œã‚‹
                                return [
                                    `å£²ä¸Š: Â¥${item.sales}ä¸‡`,
                                    `ç›®æ¨™: Â¥${item.target}ä¸‡`,
                                    `é”æˆç‡: ${Math.round(item.sales / item.target * 100)}%`
                                ];
                            },

                            // footer: ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ãƒ•ãƒƒã‚¿ãƒ¼ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
                            footer: function(tooltipItems) {
                                const index = tooltipItems[0].dataIndex;
                                const item = salesData[index];
                                return `å‰æœˆæ¯”: +${item.growth}%`;
                            }
                        }
                    }
                },

                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'å£²ä¸Šï¼ˆä¸‡å††ï¼‰'
                        }
                    }
                }
            }
        };

        // ãƒãƒ£ãƒ¼ãƒˆã‚’æç”»
        new Chart(ctx, config);
    </script>
</body>
</html>
